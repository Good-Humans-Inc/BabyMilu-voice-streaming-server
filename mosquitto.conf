# MQTT TCP Listener (standard MQTT protocol)
listener 1883 0.0.0.0
protocol mqtt

# MQTT WebSocket Listener (for MQTT over WebSocket connections)
# Not used in current architecture - both server and device use standard TCP MQTT
# Uncomment if you need WebSocket MQTT support (e.g., for browser clients)
# listener 9001 0.0.0.0
# protocol websockets

# Authentication
allow_anonymous true

# Persistence Configuration
persistence false
persistence_location /mosquitto/data/
persistence_file mosquitto.db

# Connection Settings
# Maximum number of concurrent client connections (-1 = unlimited)
max_connections -1

# Maximum number of inflight messages per client
max_inflight_messages 20

# Maximum queued messages per client (0 = unlimited)
max_queued_messages 1000

# Message persistence
# Retain messages for disconnected clients
retained_persistence true

# Auto-save persistence every 30 seconds
autosave_interval 30

# Persistent client expiration (how long to keep session for disconnected clients)
# Set to 0 to keep sessions indefinitely
persistent_client_expiration 0

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_type all
log_timestamp true

# Message size limit (0 = unlimited, or specify bytes)
message_size_limit 0

# Allow zero-length client IDs (for persistent connections)
allow_zero_length_clientid false

# Sys_interval - how often to publish $SYS topics (0 = disabled)
sys_interval 10
